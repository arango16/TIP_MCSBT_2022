{% extends "base.html" %}

{% block main %}
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
<link rel="stylesheet" href="/static/css/table_incidents/style.css">
<body>
            <form class="dashboard-buttons">
    			<a href="/status_kpi1" class="login100-form-btn login100-form-bgbtn">Status</a>
    			<a href="/capacity_kpis" class="login100-form-btn login100-form-bgbtn">Capacity</a>
    			<a href="/planning_kpis" class="login100-form-btn login100-form-bgbtn-selected">Planning</a>			
            </form> 


        <h3 style="text-align: right; position: absolute; top: 25%; right: 15%;"> Top 5 Oldest Incidents </h3>
		<div style="position: absolute; height: 600px; width: 500px; top: 30%; left: 60%;">
			<div class="row justify-content-center">
			</div>
			<div class="row">
				<div class="col-md-12">
					<div class="table-wrap">
						<table class="table table-bordered table-hover table-dark">
						  <thead>
						    <tr>
						      <th>#</th>
						      <th>INC Code</th>
						      <th>Aging (Days)</th>
						      <th>INC Status</th> 
						      <th>Assigned Organization</th>
						      <th>Priority</th>
						      <th>INC Type</th>
						    </tr>
						  </thead>
						  <tbody>
						    <tr>
						      <th scope="row">1</th>
						      <td>{{ open_tickets[0][0] }}</td>
						      <td>{{ open_tickets[0][5] }}</td>
						      <td>{{ open_tickets[0][2] }}</td>
						      <td>{{ open_tickets[0][3] }}</td>
						      <td>{{ open_tickets[0][4] }}</td>
						      <td>{{ open_tickets[0][1] }}</td>						           
						    </tr>
						    <tr>
						      <th scope="row">2</th>
						      <td>{{ open_tickets[1][0] }}</td>
						      <td>{{ open_tickets[1][5] }}</td>
						      <td>{{ open_tickets[1][2] }}</td>
						      <td>{{ open_tickets[1][3] }}</td>
						      <td>{{ open_tickets[1][4] }}</td>
						      <td>{{ open_tickets[1][1] }}</td>	      
						    </tr>
						    <tr>
						      <th scope="row">3</th>
						      <td>{{ open_tickets[2][0] }}</td>
						      <td>{{ open_tickets[2][5] }}</td>
						      <td>{{ open_tickets[2][2] }}</td>
						      <td>{{ open_tickets[2][3] }}</td>
						      <td>{{ open_tickets[2][4] }}</td>
						      <td>{{ open_tickets[2][1] }}</td>						      
						    </tr>
						    <tr>
						      <th scope="row">4</th>
						      <td>{{ open_tickets[3][0] }}</td>
						      <td>{{ open_tickets[3][5] }}</td>
						      <td>{{ open_tickets[3][2] }}</td>
						      <td>{{ open_tickets[3][3] }}</td>
						      <td>{{ open_tickets[3][4] }}</td>
						      <td>{{ open_tickets[3][1] }}</td>
						    </tr>
						    <tr>
						      <th scope="row">5</th>
						      <td>{{ open_tickets[4][0] }}</td>
						      <td>{{ open_tickets[4][5] }}</td>
						      <td>{{ open_tickets[4][2] }}</td>
						      <td>{{ open_tickets[4][3] }}</td>
						      <td>{{ open_tickets[4][4] }}</td>
						      <td>{{ open_tickets[4][1] }}</td>
						    </tr>
						  </tbody>
						</table>
					</div>
				</div>
</div>
</div>
<!-------------------------------KPI2--------------------------------------->
<div style="position: absolute; left: 10%; height: 500px; width: 600px; top:28%;"><strong>Number of Incidents in Backlog</strong>
<div class="kpi2_planning">
                <canvas id="kpi2-planning"></canvas>
                <script>

                    var ctx2 = document.getElementById('kpi2-planning').getContext('2d')

                    var barChart2 = new Chart(ctx2, {
                        type: 'line',
                        data: {
                            labels: {{ labels | safe }},
                            datasets: [{
                                  label: "Low",
                                  data: {{ low | safe}},
                                  backgroundColor: '#F9CD03',
                                  borderColor: '#F9CD03',
                                  borderWidth: 3
                              },{
                                   label: "medium",
                                   data: {{ medium | safe}},
                                   backgroundColor: '#E97B0D',
                                   borderColor: '#E97B0D',
                                   borderWidth: 3                                                       
                              }, {
                                   label: "high",
                                   data: {{ high | safe}},
                                   backgroundColor: '#DA162A',
                                   borderColor: '#DA162A',
                                   borderWidth: 1                                                       
                              },{
                                label: "critical",
                                data: {{ critical | safe}},
                                backgroundColor: '#A8151C',
                                borderColor: '#A8151C',
                                borderWidth: 3
                            }]
                        },
                        options: {
                            responsive: true,
                            legend: false

                        }
                    });

                </script>
<div>

</div>
</div>
</div>
	<script src="/static/js/login/jquery.min.js"></script>
  <script src="/static/js/login/popper.js"></script>
  <script src="/static/js/login/bootstrap.min.js"></script>
  <script src="/static/js/login/main.js"></script>



<body>
{% endblock %}